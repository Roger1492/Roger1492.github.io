<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>二，八，十，十六进制的转换</title>
  <style>
    #wrap{
      position: relative;
      margin: 200px auto;
      width: 300px;
    }
    #wrap::before{
      position: absolute;
      content: '进制转换';
      font-size: 30px;
      font-weight: 800;
      top: -40px;
      left: 100px;
    }
    section{
      position: relative;
      width: 300px;
      height: 30px;
    }
    section span{
      display: inline-block;
      position: relative;
      width: 70px;
    }
    section input{
      width: 226px;
    }
    button{
      width: 300px;
      height: 40px;
      font-size: 30px;
    }
  </style>
</head>

<body>
  <div id="wrap">
    <section><span>二进制:</span><input id="binary" type="text"></section>
    <section><span>八进制:</span><input id="octal" type="text"></section>
    <section><span>十进制:</span><input id="decimal" type="text"></section>
    <section><span>十六进制:</span><input id="hexadecimal" type="text"></section>
    <button id="btn-clear">清除</button>
  </div>
  <script>
    let btnClear = document.getElementById('btn-clear');
    let binary = document.getElementById('binary');
    let octal = document.getElementById('octal');
    let decimal = document.getElementById('decimal');
    let hexadecimal = document.getElementById('hexadecimal');

    // 1，任意一个input框中输入内容后，清除其他三个框中的value。
    // 2，点击转换按钮后先判断哪个input框中有value
    // 3，转换成其他进制

    // 进制转换方法：
    // 1，十进制转换为其他进制，用 `toString()` 转换。
    // let a = 12345;
    // (a).toString(2);
    // (a).toString(8);
    // (a).toString(16);

    // 2，其他进制转换为十进制，用 `parseInt()` 转换。
    // parseInt(x, 2);  二进制转换为十进制
    // parseInt(x, 8);  八进制转换为十进制
    // parseInt(x, 16); 十六进制转换为十进制

    // 3，其他进制转换为其他进制
    // 先用 `parseInt()` 转换为十进制，再用 `toString()` 转换为相应的进制
    
    // 2 -> 8 (2 -> 10 -> 8)
    function translate2to8(num){
      let middle = parseInt((num), 2);
      return middle.toString(8);
    }

    // 2 -> 10
    function translate2to10(num){
      return parseInt((num), 2);
    }

    // 2 -> 16
    function translate2to16(num){
      let middle = parseInt((num), 2);
      return middle.toString(16);
    }

    // 8 -> 2
    function translate8to2(num){
      let middle = parseInt(num, 8);
      return middle.toString(2);
    }
    // 8 -> 10
    function translate8to10(num){
      return parseInt(num, 8);
    }

    // 8 -> 16
    function translate8to16(num){
      let middle = parseInt(num, 8);
      return middle.toString(16);
    }

    // 10 -> 2
    function translate10to2(num){
      return (num).toString(2);
    }

    // 10 -> 8
    function translate10to8(num){
      return (num).toString(8);
    }

    // 10 -> 16
    function translate10to16(num){
      return (num).toString(16);
    }

    // 16 -> 2 (16 -> 10 -> 2)
    function translate16to2(num){
      let middle = parseInt(num, 16);
      return middle.toString(2);
    }

    // 16 -> 8
    function translate16to8(num){
      let middle = parseInt(num, 16);
      return middle.toString(8);
    }
    // 16 -> 10
    function translate16to10(num){
      return parseInt(num, 16);
    }

    binary.addEventListener('change', function(e){
      octal.value = translate2to8(this.value);
      decimal.value = translate2to10(this.value);
      hexadecimal.value = translate2to16(this.value);
    }, false);
    octal.addEventListener('change', function(e){
      binary.value = translate8to2(this.value);
      decimal.value = translate8to10(this.value);
      hexadecimal.value = translate8to16(this.value);
    }, false);
    decimal.addEventListener('change', function(e){
      binary.value = translate10to2(this.value);
      octal.value = translate10to8(this.value);
      hexadecimal.value = translate10to16(this.value);
    }, false);
    hexadecimal.addEventListener('change', function(e){
      binary.value = translate16to2(this.value);
      octal.value = translate16to8(this.value);
      decimal.value = translate16to10(this.value);
    }, false);


    // 任意进制的任意数字转换为任意进制的任意数字
    function translateAny(num, origin, result){
      if(origin === 2){
        if(result === 8){
          return translate2to8(num);
        } else if(result === 10){
          return translate2to10(num);
        } else if(result === 16){
          return translate2to16(num);
        } else {
          return 'wrong';
        }
      } else if(origin === 8){
        if(result === 2){
          return translate8to2(num);
        } else if(result === 10){
          return translate8to10(num);
        } else if(result === 16){
          return translate8to16(num);
        } else {
          return 'wrong';
        }
      } else if(origin === 10){
        if(result === 2){
          return translate10to2(num);
        } else if(result === 8){
          return translate10to8(num);
        } else if(result === 16){
          return translate10to16(num);
        } else {
          return 'wrong';
        }
      } else if(origin === 16){
        if(result === 2){
          return translate16to2(num);
        } else if(result === 8){
          return translate16to8(num);
        } else if(result === 10){
          return translate16to10(num);
        } else {
          return 'wrong';
        }
      } else {
        return '请输入2,8,10,16'
      }
    }


  </script>
</body>

</html>