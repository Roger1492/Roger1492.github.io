<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Day 041 - 页面浏览进度条</title>
  <style>
    html,body{
      padding: 0;
      margin: 0;
      height: auto;
    }
    .progress{
      position: fixed;
      top: 0;
      width: 100%;
      height: 20px;
      background: lightgray;
    }
    .progress-bar{
      position: absolute;
      height: 20px;
      background: blue;
      text-align: center;
      color: white;
    }
    h2{
      width: 200px;
      margin: 25px auto;
    }
    .context{
      margin: 25px auto;
      width: 100px;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <div class="progress">
    <div class="progress-bar"></div>
  </div>
  <h2>页面浏览进度条</h2>
  <div class="context">
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos debitis doloremque tempora rerum recusandae sunt amet, nostrum placeat totam, molestiae voluptatem necessitatibus possimus ipsum obcaecati et! Temporibus assumenda deleniti ad id esse debitis reiciendis corporis vitae omnis vel placeat tempora tenetur quos aliquam sapiente quisquam perspiciatis, modi quidem! Laborum repellat, dicta doloremque cumque quaerat voluptatum esse accusamus placeat eius maiores vitae odio quo officiis veniam. Fugiat, magni! Quasi saepe vel iure consectetur autem itaque, inventore blanditiis tempora alias similique enim omnis provident adipisci mollitia illo. Incidunt, consequatur minus. Dolores et, ipsa in dolorum, officiis adipisci ratione, eius dolor natus totam necessitatibus commodi porro accusamus quos earum corporis. Consequuntur facere quos, porro maiores vero sed sequi, dolor delectus labore esse unde provident commodi nobis fugit dolore quibusdam deserunt ipsa debitis nulla? Quos ex dolorum cumque quasi doloribus saepe a non, architecto voluptates odit expedita fugiat ipsa corrupti reiciendis, numquam sunt id dolorem temporibus, aut quis optio iure. Illum ipsa dignissimos, voluptatum libero assumenda laboriosam asperiores, tenetur mollitia odio eveniet enim nostrum expedita maxime voluptate totam, blanditiis cupiditate ea optio hic quos amet soluta? Sapiente, explicabo eos. Reprehenderit assumenda earum voluptas? Minus ab assumenda quae dolorem tempore. Debitis aliquid odit sed tenetur aperiam quisquam, eaque totam cupiditate odio consequatur dolores, asperiores assumenda, sapiente ad cumque est iusto quas facilis blanditiis maiores a. Excepturi perferendis fugit odio tempora quia saepe nostrum hic voluptas? Repudiandae atque ipsum nostrum aspernatur, illo quod quo ut numquam aliquid nisi facilis doloribus recusandae suscipit esse similique! Exercitationem nostrum dignissimos animi? Consequatur, adipisci atque corporis provident eveniet non illo debitis a, accusamus quaerat labore delectus consequuntur odio doloribus asperiores veritatis ea sapiente. Sint culpa nostrum eveniet nihil deleniti dolores debitis a laborum cumque architecto nam doloribus molestias quae unde esse officia adipisci tempore saepe suscipit, quidem eligendi. Exercitationem reprehenderit a, sequi deleniti debitis doloremque, ad fugit quasi asperiores eaque voluptas aliquid, odit quia numquam earum molestias. Soluta reprehenderit distinctio molestiae, aut asperiores est perspiciatis vel eos accusantium omnis minus harum amet doloremque sint quas. Quasi suscipit maxime doloribus, nobis recusandae dolores, repellat, esse perferendis hic illum labore sit nesciunt dolor fuga! Corrupti tempore, error at beatae quas, veniam nihil quod distinctio sequi, nesciunt excepturi dignissimos facere nulla cum in reiciendis dolorem voluptatem eaque quos alias ad consequuntur. Quo alias voluptates dolorum corrupti at sequi assumenda voluptatum cumque pariatur minima quidem quisquam, voluptate magnam maiores excepturi blanditiis, unde laboriosam corporis beatae debitis, consequuntur ratione placeat quaerat explicabo. Consequuntur sunt aspernatur laudantium incidunt nesciunt fuga voluptatem illo perspiciatis reiciendis iste sint, architecto beatae quaerat illum fugiat repudiandae nemo voluptates. Repellendus aliquid atque labore distinctio quisquam facilis perferendis voluptas repudiandae veritatis itaque, asperiores quibusdam ex tenetur! Sequi dolorem repudiandae tenetur quibusdam possimus at commodi rem distinctio. Unde nihil enim, placeat impedit numquam quidem dolores. Omnis deserunt id blanditiis explicabo libero aperiam dolore atque corrupti, laboriosam, voluptatum, fugit nobis. Provident velit laudantium aspernatur cumque sit rem deleniti nesciunt pariatur quae qui consectetur blanditiis, facere perferendis esse, laboriosam sequi dolor! Cumque culpa provident veritatis voluptatem. Nemo labore et quam nam culpa. Repellendus ipsum, sint nisi aut nobis quis amet aliquid laboriosam, modi tenetur quo accusantium inventore iste praesentium reprehenderit numquam ipsam non eligendi suscipit at necessitatibus rem! Neque vero ab veritatis optio hic quos distinctio, vel id eaque tempora fugiat tenetur cumque sapiente quibusdam iure accusamus ratione iusto dolor nemo soluta molestias. Illum iste ipsam sint repellendus iure et explicabo? Quia hic officiis delectus, eos repellat rerum doloribus culpa harum distinctio natus deleniti quae dolores laboriosam eum eius incidunt error magni dolorem architecto unde maiores! Amet repellat fugit rerum laboriosam accusantium pariatur quae aliquam ipsam id repudiandae, odio ullam cum voluptatem tenetur autem quaerat nemo, minima beatae similique placeat molestias debitis, esse reiciendis. Illum a aut necessitatibus repudiandae unde non natus cupiditate quidem consequuntur vero ullam delectus repellat, velit autem molestiae voluptate magnam nostrum enim aperiam, officia soluta eum suscipit neque. Omnis consectetur hic eius aperiam. Ut dolore earum nam quasi corrupti cum debitis facilis eligendi explicabo consequatur mollitia qui soluta, in temporibus voluptatum veniam numquam suscipit, neque repellendus exercitationem adipisci labore. Molestiae, soluta. Laudantium beatae non dolorum eos illo quae quod! Accusantium libero doloremque dolorum delectus, ea similique molestiae a magni perspiciatis, et assumenda excepturi officiis necessitatibus ad voluptatem deleniti aut sed tempora? Delectus quidem tempora qui itaque. Rerum harum, maxime debitis aliquid dignissimos exercitationem fugiat? At quos possimus doloremque commodi asperiores perferendis iusto delectus, distinctio et placeat corporis fugit laudantium corrupti quisquam neque soluta perspiciatis pariatur amet quis quia! Eius, ullam. Eligendi excepturi sit deleniti voluptatibus nam totam labore, earum officiis hic minima suscipit laudantium accusantium iure voluptas facere! Quis veniam quam illo iure ea odio fuga. Mollitia iure libero maxime nulla harum qui, fuga temporibus tempora saepe numquam quibusdam? Labore, ipsum magnam temporibus quibusdam error libero similique voluptates, at aspernatur, fuga doloremque debitis voluptate iste consectetur mollitia veritatis rem. Optio sint labore quisquam laudantium dicta tempore animi rem, eveniet repellat sit maiores, magnam aliquam! Eveniet reprehenderit earum blanditiis maxime, neque temporibus. Sit consequuntur enim modi libero beatae ad nisi suscipit fugiat aliquam commodi non, fuga, vero magnam? Blanditiis excepturi earum vitae totam? Asperiores voluptas officiis unde ab similique. Perspiciatis dolores quo atque rerum doloribus illo nesciunt vitae minus, magnam incidunt labore magni harum, et dolorem voluptatibus impedit omnis consequatur architecto aliquam dolorum animi. Provident voluptate dolor non, qui eaque quia cumque amet totam consequatur porro, aperiam rerum harum odit doloribus repudiandae officiis ipsa asperiores soluta ipsum assumenda, sint ducimus sequi maxime repellendus. Voluptates quia dicta, esse soluta possimus nobis blanditiis quos distinctio deleniti, corporis, sit accusamus eveniet ipsam iure. Quia mollitia suscipit nisi possimus nemo. Exercitationem dignissimos reprehenderit amet aut sed perspiciatis dolorem cum cumque blanditiis maxime ea nulla, sit nobis expedita totam consequuntur fugiat, eveniet itaque tempore numquam! Laborum quod laboriosam officiis, culpa doloremque, ut eveniet magnam aspernatur voluptatibus reiciendis tempora eos earum? Ullam tenetur voluptates adipisci hic ad laudantium facere est nam a consequuntur deserunt corrupti repellat vel id illo, minus deleniti sapiente expedita accusamus fugit laborum reprehenderit aliquam?
  </div>

  <script>
    let progress = document.getElementsByClassName('progress')[0];
    let progressbar = document.getElementsByClassName('progress-bar')[0];
    let context = document.getElementsByClassName('context')[0];
    window.addEventListener('scroll', function(e){
      let sHeight = context.scrollHeight;     // 页面的总高度
      let scrollTop = document.documentElement.scrollTop;   // 距离顶部的宽度
      let iHeight = window.innerHeight;     // 页面的可视高度
      let precent = Math.floor(((scrollTop / (sHeight-iHeight)) * 100)).toFixed();
      progressbar.style.width = precent + '%';
      progressbar.innerHTML = precent + '%';
    }, false);
  </script>
</body>
</html>